<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Gâteau Anniversaire Animé</title>
<style>
body {
  margin:0;
  height:100vh;
  overflow:hidden;
  background: linear-gradient(180deg,#ff9ad2,#ff68b5);
}

/* Parent gâteau centré horizontalement */
.cake {
  position:absolute;
  left:50%;
  top:50%;
  transform:translateX(-50%);
  z-index:5;
}

/* Étages du gâteau */
.layer {
  margin:0 auto;
  border-radius:20px;
  position:absolute;
  left:50%;
  transform:translateX(-50%);
  box-shadow:0 4px 6px rgba(0,0,0,0.2);
  opacity:0;
}

/* Différentes tailles */
.layer:nth-child(1){ width:120px; height:45px; background:#ffda79; } 
.layer:nth-child(2){ width:150px; height:50px; background:#f6e58d; }
.layer:nth-child(3){ width:180px; height:55px; background:#fad390; }
.layer:nth-child(4){ width:220px; height:60px; background:#f8c291; } 

/* Glaçage */
.icing {
  position:absolute;
  top:0;
  left:0;
  width:100%;
  height:20px;
  background: linear-gradient(to right,#ff6b81,#ff9a76);
  border-radius:50% 50% 0 0;
}

/* Bougie */
.candle {
  position:absolute;
  width:10px;
  height:30px;
  background:#ffeaa7;
  top:-35px;
  left:50%;
  transform:translateX(-50%);
  border-radius:3px;
  opacity:0; /* invisible au départ */
  z-index:6;
}
.flame {
  position:absolute;
  width:12px;
  height:12px;
  top:-12px;
  left:50%;
  transform:translateX(-50%);
  background: radial-gradient(circle, #ffeb3b 0%, #ff5722 60%);
  border-radius:50%;
  animation:flame 0.4s infinite alternate;
}

/* Animation chute par étage avec rebond */
@keyframes dropLayer {
  0% { opacity:0; transform:translateX(-50%) translateY(-600px); }
  60% { opacity:1; transform:translateX(-50%) translateY(var(--target)); }
  80% { transform:translateX(-50%) translateY(calc(var(--target) - 15px)); }
  90% { transform:translateX(-50%) translateY(calc(var(--target) + 5px)); }
  100% { transform:translateX(-50%) translateY(var(--target)); }
}

/* Animation flamme réaliste */
@keyframes flame {
  0% { transform:translateX(-50%) scale(1); opacity:1; }
  25% { transform:translateX(-52%) scale(1.2); opacity:0.9; }
  50% { transform:translateX(-48%) scale(1.1); opacity:1; }
  75% { transform:translateX(-51%) scale(1.3); opacity:0.85; }
  100% { transform:translateX(-50%) scale(1); opacity:1; }
}

/* Confettis */
.confetti { width:10px; height:10px; position:absolute; top:-20px; border-radius:50%; animation:fall linear infinite; z-index:3; }
.confetti.star { clip-path: polygon(50% 0%, 61% 35%, 98% 35%, 68% 57%, 79% 91%, 50% 70%, 21% 91%, 32% 57%, 2% 35%, 39% 35%); }
.confetti.diamond { transform: rotate(45deg); }
@keyframes fall {0%{transform:translateY(0) rotate(0deg);} 50%{transform:translateY(65vh) rotate(180deg);} 100%{transform:translateY(130vh) rotate(360deg);} }

/* Ballons avec rebond léger */
.balloon { position:absolute; width:70px; height:90px; border-radius:50% 50% 45% 45%; animation:float 7s ease-in-out infinite, balloonBounce 1s ease forwards; box-shadow:0 0 15px rgba(255,255,255,0.6); z-index:2; }
.string { position:absolute; width:2px; height:60px; background:#444; left:50%; transform:translateX(-50%); top:90px; }
@keyframes float{ 0%{transform:translateY(0) rotate(-6deg);} 50%{transform:translateY(-70px) rotate(6deg);} 100%{transform:translateY(0) rotate(-6deg);} }
@keyframes balloonBounce{ 0% { bottom:-90px; } 60% { bottom:20px; } 80% { bottom:10px; } 100% { bottom:15px; } }

/* Paillettes */
.sparkle { width:6px; height:6px; border-radius:50%; position:absolute; opacity:0.9; animation:twinkle 1.5s infinite alternate; box-shadow:0 0 8px 2px white; z-index:4; }
@keyframes twinkle { 0% { transform:scale(1); opacity:0.4; } 100% { transform:scale(1.5); opacity:1; } }
</style>
</head>
<body>

<div class="cake">
  <div class="layer" style="--target:0px;">
    <div class="icing"></div>
    <div class="candle" id="candle"><div class="flame"></div></div>
  </div>
  <div class="layer" style="--target:50px;"><div class="icing"></div></div>
  <div class="layer" style="--target:105px;"><div class="icing"></div></div>
  <div class="layer" style="--target:165px;"><div class="icing"></div></div>
</div>

<script>
// Chute des étages
const layers = document.querySelectorAll('.layer');
layers.forEach((layer, index)=>{
  layer.style.animation = `dropLayer 0.8s forwards`;
  layer.style.animationDelay = `${index*0.5}s`;
});

// Bougie visible après la chute complète
const candle = document.getElementById('candle');
setTimeout(()=>{
  candle.style.opacity = 1;
}, layers.length * 500 + 800);

// Confettis
const confettiColors = ['#ff5c8a','#ffd700','#7df9ff','#b19cd9','#ff7f50','#90ee90','#ffffff'];
const sparkleColors = ['#ffffff','#ffeaa7','#fab1a0','#81ecec'];

for(let i=0;i<150;i++){
  const c=document.createElement('div');
  c.className='confetti';
  c.style.left=Math.random()*100+'vw';
  c.style.background=confettiColors[Math.floor(Math.random()*confettiColors.length)];
  c.style.animationDuration=(3+Math.random()*3)+'s';
  const shapes = ['round','star','diamond'];
  const shape = shapes[Math.floor(Math.random()*shapes.length)];
  if(shape!=='round') c.classList.add(shape);
  document.body.appendChild(c);
}

// Ballons
const balloonColors = ['#ff6b81','#ffd93d','#6bcdfd','#a97ff0','#ff9a76','#6fffb0'];
for(let i=0;i<6;i++){
  const b=document.createElement('div');
  b.className='balloon';
  b.style.left=(10+i*15)+'vw';
  b.style.background=balloonColors[i % balloonColors.length];
  b.style.animationDelay=(i*0.5)+'s';
  const s=document.createElement('div');
  s.className='string';
  b.appendChild(s);
  document.body.appendChild(b);
}

// Paillettes
for(let i=0;i<50;i++){
  const sp=document.createElement('div');
  sp.className='sparkle';
  const color = sparkleColors[Math.floor(Math.random()*sparkleColors.length)];
  sp.style.background = color;
  sp.style.boxShadow = `0 0 8px 2px ${color}`;
  sp.style.left=Math.random()*100+'vw';
  sp.style.top=Math.random()*100+'vh';
  document.body.appendChild(sp);
}

// Interaction souris
document.body.addEventListener('mousemove', e=>{
  const c=document.createElement('div');
  c.className='confetti';
  c.style.left=e.clientX+'px';
  c.style.top=e.clientY+'px';
  c.style.background=confettiColors[Math.floor(Math.random()*confettiColors.length)];
  c.style.width='6px';
  c.style.height='6px';
  c.style.animationDuration='2s';
  document.body.appendChild(c);
  setTimeout(()=>c.remove(),2000);
});
</script>

</body>
</html>
