<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Anniversaire Animé</title>
<link href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@700&display=swap" rel="stylesheet">
<style>
body {
  margin:0;
  height:100vh;
  overflow:hidden;
  background: linear-gradient(180deg,#ff9ad2,#ff68b5);
  font-family: sans-serif;
}

/* Gâteau */
.cake {
  position:absolute;
  left:50%;
  top:-300px;
  transform:translateX(-50%);
  z-index:5;
  animation:drop 2s ease forwards;
}

/* Étages */
.layer {
  margin:0 auto;
  border-radius:20px;
  position:relative;
  box-shadow:0 4px 6px rgba(0,0,0,0.2);
}
.layer:nth-child(1){ width:120px; height:45px; background:#ffda79; } 
.layer:nth-child(2){ width:150px; height:50px; background:#f6e58d; }
.layer:nth-child(3){ width:180px; height:55px; background:#fad390; }
.layer:nth-child(4){ width:220px; height:60px; background:#f8c291; }

/* Glaçage */
.icing {
  position:absolute;
  width:100%;
  height:20px;
  top:0;
  background: linear-gradient(to right,#ff6b81,#ff9a76);
  border-radius:50% 50% 0 0;
}

/* Chute avec rebond */
@keyframes drop {
  0% { top:-300px; }
  70% { top:50vh; }
  90% { top:48vh; }
  100% { top:49vh; }
}

/* Bougies */
.candle {
  position:absolute;
  top:-30px;
  width:10px;
  height:30px;
  background:#ff4d4d;
  border-radius:2px;
  z-index:6;
}
.flame {
  position:absolute;
  width:8px;
  height:8px;
  background: radial-gradient(circle, #ffd700 0%, #ff6b6b 70%);
  border-radius:50%;
  top:-6px;
  left:1px;
  animation:flame 0.5s forwards infinite alternate;
}
@keyframes flame {
  0% { transform: translateY(0) scale(1); }
  100% { transform: translateY(-3px) scale(1.2); }
}

/* Confettis */
.confetti { width:10px; height:10px; position:absolute; top:-20px; border-radius:50%; animation:fall linear infinite; z-index:3; }
.confetti.star { clip-path: polygon(50% 0%, 61% 35%, 98% 35%, 68% 57%, 79% 91%, 50% 70%, 21% 91%, 32% 57%, 2% 35%, 39% 35%); }
.confetti.diamond { transform: rotate(45deg); }
@keyframes fall {0%{transform:translateY(0) rotate(0deg);} 50%{transform:translateY(65vh) rotate(180deg);} 100%{transform:translateY(130vh) rotate(360deg);} }

/* Ballons */
.balloon { position:absolute; width:70px; height:90px; border-radius:50% 50% 45% 45%; animation:float 7s ease-in-out infinite; box-shadow:0 0 15px rgba(255,255,255,0.6); z-index:2; }
.string { position:absolute; width:2px; height:60px; background:#444; left:50%; transform:translateX(-50%); top:90px; }
@keyframes float{ 0%{transform:translateY(0) rotate(-6deg);} 50%{transform:translateY(-70px) rotate(6deg);} 100%{transform:translateY(0) rotate(-6deg);} }

/* Paillettes */
.sparkle { width:6px; height:6px; border-radius:50%; position:absolute; opacity:0.9; animation:twinkle 1.5s infinite alternate; box-shadow:0 0 8px 2px white; z-index:4; }
@keyframes twinkle { 0% { transform:scale(1); opacity:0.4; } 100% { transform:scale(1.5); opacity:1; } }

/* Texte Happy Birthday */
#birthdayText {
  position:absolute;
  bottom:50px;
  left:50%;
  transform:translateX(-50%);
  font-size:2.5em;
  color:#fff;
  letter-spacing:2px;
  font-weight:bold;
  z-index:10;
  font-family: 'Dancing Script', cursive;
  text-shadow: 2px 2px 4px rgba(0,0,0,0.4);
}

/* Feux d'artifice */
.firework {
  position:absolute;
  width:6px;
  height:6px;
  border-radius:50%;
  opacity:1;
  animation:explode 1.2s ease-out forwards;
}
@keyframes explode { 0% { transform: translate(0,0) scale(1); opacity:1; } 100% { transform: translate(var(--x), var(--y)) scale(0); opacity:0; } }

/* Effet "14" */
#number14 {
  position:absolute;
  font-size:5em;
  color:#ffd700;
  font-weight:bold;
  left:50%;
  top:50%;
  transform:translate(-50%,0) scale(1);
  opacity:0;
  z-index:20;
  font-family: 'Dancing Script', cursive;
  text-shadow: 2px 2px 8px #ff6b81;
  animation:rise 2s forwards;
}
@keyframes rise {
  0% { transform:translate(-50%,0) scale(1); opacity:1; }
  100% { transform:translate(-50%,-150px) scale(1.5); opacity:0; }
}
</style>
</head>
<body>

<div class="cake" id="cake">
  <div class="layer"><div class="icing"></div></div>
  <div class="layer"><div class="icing"></div></div>
  <div class="layer"><div class="icing"></div></div>
  <div class="layer"><div class="icing"></div></div>
</div>

<div id="birthdayText"></div>

<script>
// Bougies
const cake = document.getElementById('cake');
const smallLayer = cake.querySelector('.layer:first-child');
const positions = [20, 50, 80];
positions.forEach(p => {
  const candle = document.createElement('div');
  candle.className = 'candle';
  candle.style.left = `calc(${p}% - 5px)`;
  candle.style.top = '-30px';
  const flame = document.createElement('div');
  flame.className = 'flame';
  candle.appendChild(flame);
  smallLayer.appendChild(candle);
});

// Confettis
const confettiColors = ['#ff5c8a','#ffd700','#7df9ff','#b19cd9','#ff7f50','#90ee90','#ffffff'];
const sparkleColors = ['#ffffff','#ffeaa7','#fab1a0','#81ecec'];
for(let i=0;i<150;i++){
  const c=document.createElement('div');
  c.className='confetti';
  c.style.left=Math.random()*100+'vw';
  c.style.background=confettiColors[Math.floor(Math.random()*confettiColors.length)];
  c.style.animationDuration=(3+Math.random()*3)+'s';
  const shapes = ['round','star','diamond'];
  const shape = shapes[Math.floor(Math.random()*shapes.length)];
  if(shape!=='round') c.classList.add(shape);
  document.body.appendChild(c);
}

// Ballons
const balloonColors = ['#ff6b81','#ffd93d','#6bcdfd','#a97ff0','#ff9a76','#6fffb0'];
for(let i=0;i<6;i++){
  const b=document.createElement('div');
  b.className='balloon';
  b.style.left=(10+i*15)+'vw';
  b.style.bottom='-90px';
  b.style.background=balloonColors[i % balloonColors.length];
  b.style.animationDelay=(i*0.5)+'s';
  const s=document.createElement('div');
  s.className='string';
  b.appendChild(s);
  document.body.appendChild(b);
}

// Paillettes
for(let i=0;i<50;i++){
  const sp=document.createElement('div');
  sp.className='sparkle';
  const color = sparkleColors[Math.floor(Math.random()*sparkleColors.length)];
  sp.style.background = color;
  sp.style.boxShadow = `0 0 8px 2px ${color}`;
  sp.style.left=Math.random()*100+'vw';
  sp.style.top=Math.random()*100+'vh';
  document.body.appendChild(sp);
}

// Texte Happy Birthday
function typeText(text, elementId, delay=150){
  const element = document.getElementById(elementId);
  let i = 0;
  function addLetter(){
    if(i < text.length){
      element.textContent += text[i];
      i++;
      setTimeout(addLetter, delay);
    }
  }
  addLetter();
}
setTimeout(()=>{ typeText("Happy Birthday my Love!", "birthdayText", 150); },2500);

// Feux d'artifice continus
function createFirework(){
  const x = Math.random() * window.innerWidth;
  const y = 50 + Math.random()*150; 
  const particles = 30 + Math.floor(Math.random()*30);
  for(let i=0;i<particles;i++){
    const f = document.createElement('div');
    f.className='firework';
    const angle = Math.random()*2*Math.PI;
    const radius = 80 + Math.random()*50;
    const dx = Math.cos(angle)*radius;
    const dy = Math.sin(angle)*radius;
    f.style.left = x + 'px';
    f.style.top = y + 'px';
    f.style.setProperty('--x', dx+'px');
    f.style.setProperty('--y', dy+'px');
    f.style.background = `hsl(${Math.random()*360}, 100%, 50%)`;
    document.body.appendChild(f);
    setTimeout(()=>f.remove(),1500);
  }
}
setInterval(createFirework, 600);

// Faire apparaître le "14" après chute du gâteau
setTimeout(()=>{
  const num = document.createElement('div');
  num.id='number14';
  num.textContent='14';
  document.body.appendChild(num);
  // disparaît automatiquement grâce à l'animation CSS
}, 2500);
</script>
</body>
</html>
